<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoGrand - –ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä –∑–∞ –ó–∞–ø–ª–∞—Ç–∏</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>üöó AutoGrand - –ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä –∑–∞ –ó–∞–ø–ª–∞—Ç–∏</h1>

        <!-- –ò–∑–±–æ—Ä –Ω–∞ –æ–±–µ–∫—Ç -->
        <div class="section location-selector-section">
            <h2>üìç –ò–∑–±–æ—Ä –Ω–∞ –û–±–µ–∫—Ç</h2>
            <div class="location-selector-wrapper">
                <select id="locationSelector" class="location-selector">
                    <option value="">-- –ò–∑–±–µ—Ä–∏ –æ–±–µ–∫—Ç --</option>
                </select>
                <button class="btn-secondary" id="btnManageLocations">‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
            </div>
            <div class="selected-location-info" id="selectedLocationInfo" style="display: none;">
                <span class="location-badge" id="locationBadge"></span>
            </div>
        </div>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –æ–±–µ–∫—Ç–∏ (—Å–∫—Ä–∏—Ç–æ –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ) -->
        <div class="section manage-locations-section" id="manageLocationsSection" style="display: none;">
            <h2>üè¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –û–±–µ–∫—Ç–∏</h2>
            <div class="locations-grid" id="locationsGrid">
                <!-- –û–±–µ–∫—Ç–∏—Ç–µ —â–µ —Å–µ –∑–∞—Ä–µ–¥—è—Ç —Ç—É–∫ -->
            </div>
            
            <details class="add-location-details">
                <summary>‚ûï –î–æ–±–∞–≤–∏ –Ω–æ–≤ –æ–±–µ–∫—Ç</summary>
                <div class="form-row">
                    <div class="form-group">
                        <label for="locationName">–ò–º–µ –Ω–∞ –æ–±–µ–∫—Ç–∞</label>
                        <input type="text" id="locationName" placeholder="–ù–∞–ø—Ä. –¢—ä—Ä–≥–æ–≤—Å–∫–∏ –æ–±–µ–∫—Ç">
                    </div>
                    <div class="form-group">
                        <label for="locationCity">–ì—Ä–∞–¥</label>
                        <input type="text" id="locationCity" placeholder="–ù–∞–ø—Ä. –í–∞—Ä–Ω–∞">
                    </div>
                    <div class="form-group">
                        <label for="locationAddress">–ê–¥—Ä–µ—Å</label>
                        <input type="text" id="locationAddress" placeholder="–ù–∞–ø—Ä. –±—É–ª. –ü—Ä–∏–º–æ—Ä—Å–∫–∏ 100">
                    </div>
                    <div class="form-group">
                        <label for="locationType">–¢–∏–ø</label>
                        <select id="locationType">
                            <option value="store">–¢—ä—Ä–≥–æ–≤—Å–∫–∏ –æ–±–µ–∫—Ç</option>
                            <option value="warehouse">–°–∫–ª–∞–¥</option>
                            <option value="office">–û—Ñ–∏—Å</option>
                        </select>
                    </div>
                </div>
                <button class="btn-primary" id="btnAddLocation">–î–æ–±–∞–≤–∏ –û–±–µ–∫—Ç</button>
            </details>
        </div>

        <!-- –û—Å–Ω–æ–≤–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ø–æ–∫–∞–∑–≤–∞ —Å–µ —Å–∞–º–æ –ø—Ä–∏ –∏–∑–±—Ä–∞–Ω –æ–±–µ–∫—Ç) -->
        <div id="mainInterface" style="display: none;">
            
            <!-- –û–±—â–∏ –¥–∞–Ω–Ω–∏ –∑–∞ –æ–±–µ–∫—Ç–∞ -->
            <div class="section global-turnover">
                <h2>üìä –î–∞–Ω–Ω–∏ –∑–∞ <span id="locationNameHeader"></span></h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="month">–ú–µ—Å–µ—Ü</label>
                        <select id="month">
                            <option value="–Ø–Ω—É–∞—Ä–∏">–Ø–Ω—É–∞—Ä–∏</option>
                            <option value="–§–µ–≤—Ä—É–∞—Ä–∏">–§–µ–≤—Ä—É–∞—Ä–∏</option>
                            <option value="–ú–∞—Ä—Ç">–ú–∞—Ä—Ç</option>
                            <option value="–ê–ø—Ä–∏–ª">–ê–ø—Ä–∏–ª</option>
                            <option value="–ú–∞–π">–ú–∞–π</option>
                            <option value="–Æ–Ω–∏">–Æ–Ω–∏</option>
                            <option value="–Æ–ª–∏">–Æ–ª–∏</option>
                            <option value="–ê–≤–≥—É—Å—Ç">–ê–≤–≥—É—Å—Ç</option>
                            <option value="–°–µ–ø—Ç–µ–º–≤—Ä–∏">–°–µ–ø—Ç–µ–º–≤—Ä–∏</option>
                            <option value="–û–∫—Ç–æ–º–≤—Ä–∏">–û–∫—Ç–æ–º–≤—Ä–∏</option>
                            <option value="–ù–æ–µ–º–≤—Ä–∏">–ù–æ–µ–º–≤—Ä–∏</option>
                            <option value="–î–µ–∫–µ–º–≤—Ä–∏">–î–µ–∫–µ–º–≤—Ä–∏</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="year">–ì–æ–¥–∏–Ω–∞</label>
                        <input type="number" id="year" placeholder="–ù–∞–ø—Ä. 2025" min="2000" max="2100">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="targetTurnover">üéØ –¢–∞—Ä–≥–µ—Ç –∑–∞ –º–µ—Å–µ—Ü–∞</label>
                        <input type="number" id="targetTurnover" placeholder="–ù–∞–ø—Ä. 100000" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="globalTurnover">–û–±—â –æ–±–æ—Ä–æ—Ç –Ω–∞ –æ–±–µ–∫—Ç–∞</label>
                        <input type="number" id="globalTurnover" placeholder="–ù–∞–ø—Ä. 122000" step="0.01">
                    </div>
                </div>
                <div id="targetStatus" class="target-status" style="display: none;"></div>
            </div>

            <!-- –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –Ω–æ–≤ –¥–∏–ª—ä—Ä -->
            <div class="section">
                <h2>‚ûï –î–æ–±–∞–≤–∏ –î–∏–ª—ä—Ä</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="dealerName">–ò–º–µ –Ω–∞ –¥–∏–ª—ä—Ä–∞</label>
                        <input type="text" id="dealerName" placeholder="–ù–∞–ø—Ä. –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤">
                    </div>
                    <div class="form-group">
                        <label for="coefGeneral">–ö–æ–µ—Ñ–∏—Ü–∏–µ–Ω—Ç (–æ–±—â –æ–±–æ—Ä–æ—Ç)</label>
                        <input type="number" id="coefGeneral" step="0.0001" placeholder="–ù–∞–ø—Ä. 0.0015">
                    </div>
                    <div class="form-group">
                        <label for="coefPersonal">–ö–æ–µ—Ñ–∏—Ü–∏–µ–Ω—Ç (—Å–æ–±—Å—Ç–≤–µ–Ω –æ–±–æ—Ä–æ—Ç)</label>
                        <input type="number" id="coefPersonal" step="0.0001" placeholder="–ù–∞–ø—Ä. 0.015">
                    </div>
                </div>
                <button class="btn-primary" id="btnAddDealer">–î–æ–±–∞–≤–∏ –î–∏–ª—ä—Ä</button>
            </div>

            <!-- –°–ø–∏—Å—ä–∫ —Å –¥–∏–ª—ä—Ä–∏ -->
            <div class="section">
                <h2>üë• –î–∏–ª—ä—Ä–∏ –≤ <span id="locationNameDealers"></span></h2>
                <div id="dealersList" class="dealers-list">
                    <div class="empty-state">
                        <p>–ù—è–º–∞ –¥–æ–±–∞–≤–µ–Ω–∏ –¥–∏–ª—ä—Ä–∏ –∑–∞ —Ç–æ–∑–∏ –æ–±–µ–∫—Ç.</p>
                        <p>–î–æ–±–∞–≤–∏ –¥–∏–ª—ä—Ä –æ—Ç —Ñ–æ—Ä–º–∞—Ç–∞ –ø–æ-–≥–æ—Ä–µ.</p>
                    </div>
                </div>
            </div>

            <!-- –î–µ–π—Å—Ç–≤–∏—è -->
            <div class="actions">
                <button class="btn-primary" id="btnCalculate">üßÆ –ò–∑—á–∏—Å–ª–∏</button>
                <button class="btn-warning" id="btnClear">üóëÔ∏è –ò–∑—á–∏—Å—Ç–∏</button>
                <button class="btn-success" id="btnExport">üì• –°–≤–∞–ª–∏ Excel</button>
            </div>

            <!-- –ö–∞—á–≤–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏ -->
            <div class="section upload-section">
                <h2>üì§ –ö–∞—á–∏ –¥–∞–Ω–Ω–∏ –æ—Ç Excel</h2>
                <p class="upload-hint">–ö–∞—á–∏ —Ñ–∞–π–ª —Å –∫–æ–ª–æ–Ω–∏: –ò–º–µ, –õ–∏—á–µ–Ω –æ–±–æ—Ä–æ—Ç, –û–±—â –æ–±–æ—Ä–æ—Ç</p>
                <div class="upload-actions">
                    <label class="btn-upload" for="excelUpload">
                        üìÇ –ò–∑–±–µ—Ä–∏ —Ñ–∞–π–ª
                        <input type="file" id="excelUpload" accept=".xlsx,.xls,.csv" hidden>
                    </label>
                    <button class="btn-template" id="btnDownloadTemplate">üìã –°–≤–∞–ª–∏ —à–∞–±–ª–æ–Ω</button>
                </div>
                <div id="uploadStatus" class="upload-status"></div>
            </div>

            <!-- –†–µ–∑—É–ª—Ç–∞—Ç–∏ -->
            <div class="section" id="resultsSection" style="display: none;">
                <h2>üìã –†–µ–∑—É–ª—Ç–∞—Ç–∏ –∑–∞ <span class="results-period"></span></h2>
                <div id="targetResult" class="target-result"></div>
                <div class="table-wrapper">
                    <table class="results-table" id="resultsTable">
                        <thead>
                            <tr>
                                <th>–ò–º–µ</th>
                                <th>–û—Å–Ω. –∑–∞–ø–ª–∞—Ç–∞</th>
                                <th>–û–±—â –æ–±–æ—Ä–æ—Ç</th>
                                <th>–°–æ–±—Å—Ç–≤–µ–Ω –æ–±–æ—Ä–æ—Ç</th>
                                <th>–í–∞—É—á–µ—Ä–∏</th>
                                <th>–ë–æ–Ω—É—Å —Ç–∞—Ä–≥–µ—Ç</th>
                                <th>–ë—Ä—É—Ç–æ</th>
                                <th>–ë–æ–Ω—É—Å</th>
                            </tr>
                        </thead>
                        <tbody id="resultsBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- –°—ä–æ–±—â–µ–Ω–∏–µ –∑–∞ –∏–∑–±–æ—Ä –Ω–∞ –æ–±–µ–∫—Ç -->
        <div id="selectLocationMessage" class="select-location-message">
            <p>üëÜ –ò–∑–±–µ—Ä–∏ –æ–±–µ–∫—Ç –æ—Ç –ø–∞–¥–∞—â–æ—Ç–æ –º–µ–Ω—é, –∑–∞ –¥–∞ –∑–∞–ø–æ—á–Ω–µ—à —Ä–∞–±–æ—Ç–∞.</p>
        </div>
    </div>

    <script type="module" src="./dist/app.js"></script>
</body>
</html>
